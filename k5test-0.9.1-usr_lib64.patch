From 833d6c6b7cac7721e6e246b49edc794c19ab5178 Mon Sep 17 00:00:00 2001
From: Robbie Harwood <rharwood@redhat.com>
Date: Thu, 24 Mar 2016 14:39:53 -0400
Subject: [PATCH 1/3] Ensure test suite works with RHEL /usr/lib64

Adapted from https://github.com/pythongssapi/k5test/pull/1
---
 gssapi/tests/_utils.py | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/gssapi/tests/_utils.py b/gssapi/tests/_utils.py
index 603be56..57e10e4 100644
--- a/gssapi/tests/_utils.py
+++ b/gssapi/tests/_utils.py
@@ -75,9 +75,11 @@ def _find_plugin_dir():
 
     # if there was no LD_LIBRARY_PATH, or the above failed
     if _PLUGIN_DIR is None:
-        # if we don't have a LD_LIBRARY_PATH, just search in
-        # $prefix/lib
+        lib_dir = os.path.join(get_output('krb5-config --prefix'), 'lib64')
+        _PLUGIN_DIR = _decide_plugin_dir(_find_plugin_dirs_installed(lib_dir))
 
+    # /usr/lib64 has only been observed on RHEL
+    if _PLUGIN_DIR is None:
         lib_dir = os.path.join(get_output('krb5-config --prefix'), 'lib')
         _PLUGIN_DIR = _decide_plugin_dir(_find_plugin_dirs_installed(lib_dir))
 
-- 
1.8.3.1

